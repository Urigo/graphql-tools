5a7339bf0846ccc2e2fdbe748bbab8ec
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createSchemaDefinition = void 0;
function createSchemaDefinition(def, config) {
    const schemaRoot = {};
    if (def.query) {
        schemaRoot.query = def.query.toString();
    }
    if (def.mutation) {
        schemaRoot.mutation = def.mutation.toString();
    }
    if (def.subscription) {
        schemaRoot.subscription = def.subscription.toString();
    }
    const fields = Object.keys(schemaRoot)
        .map(rootType => (schemaRoot[rootType] ? `${rootType}: ${schemaRoot[rootType]}` : null))
        .filter(a => a);
    if (fields.length) {
        return `schema { ${fields.join('\n')} }`;
    }
    if (config && config.force) {
        return ` schema { query: Query } `;
    }
    return undefined;
}
exports.createSchemaDefinition = createSchemaDefinition;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvYXJkYXRfMDAwL0d1aWxkL2dyYXBocWwtdG9vbHMvcGFja2FnZXMvdXRpbHMvc3JjL2NyZWF0ZS1zY2hlbWEtZGVmaW5pdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7QUFFQSxTQUFnQixzQkFBc0IsQ0FDcEMsR0FJQyxFQUNELE1BRUM7SUFFRCxNQUFNLFVBQVUsR0FJWixFQUFFLENBQUM7SUFFUCxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUU7UUFDYixVQUFVLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDekM7SUFFRCxJQUFJLEdBQUcsQ0FBQyxRQUFRLEVBQUU7UUFDaEIsVUFBVSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO0tBQy9DO0lBRUQsSUFBSSxHQUFHLENBQUMsWUFBWSxFQUFFO1FBQ3BCLFVBQVUsQ0FBQyxZQUFZLEdBQUcsR0FBRyxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsQ0FBQztLQUN2RDtJQUVELE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO1NBQ25DLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsS0FBSyxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdkYsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbEIsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO1FBQ2pCLE9BQU8sWUFBWSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7S0FDMUM7SUFFRCxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFO1FBQzFCLE9BQU8sMkJBQTJCLENBQUM7S0FDcEM7SUFFRCxPQUFPLFNBQVMsQ0FBQztBQUNuQixDQUFDO0FBekNELHdEQXlDQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9hcmRhdF8wMDAvR3VpbGQvZ3JhcGhxbC10b29scy9wYWNrYWdlcy91dGlscy9zcmMvY3JlYXRlLXNjaGVtYS1kZWZpbml0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdyYXBoUUxPYmplY3RUeXBlIH0gZnJvbSAnZ3JhcGhxbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTY2hlbWFEZWZpbml0aW9uKFxuICBkZWY6IHtcbiAgICBxdWVyeTogc3RyaW5nIHwgR3JhcGhRTE9iamVjdFR5cGUgfCBudWxsO1xuICAgIG11dGF0aW9uOiBzdHJpbmcgfCBHcmFwaFFMT2JqZWN0VHlwZSB8IG51bGw7XG4gICAgc3Vic2NyaXB0aW9uOiBzdHJpbmcgfCBHcmFwaFFMT2JqZWN0VHlwZSB8IG51bGw7XG4gIH0sXG4gIGNvbmZpZz86IHtcbiAgICBmb3JjZT86IGJvb2xlYW47XG4gIH1cbik6IHN0cmluZyB7XG4gIGNvbnN0IHNjaGVtYVJvb3Q6IHtcbiAgICBxdWVyeT86IHN0cmluZztcbiAgICBtdXRhdGlvbj86IHN0cmluZztcbiAgICBzdWJzY3JpcHRpb24/OiBzdHJpbmc7XG4gIH0gPSB7fTtcblxuICBpZiAoZGVmLnF1ZXJ5KSB7XG4gICAgc2NoZW1hUm9vdC5xdWVyeSA9IGRlZi5xdWVyeS50b1N0cmluZygpO1xuICB9XG5cbiAgaWYgKGRlZi5tdXRhdGlvbikge1xuICAgIHNjaGVtYVJvb3QubXV0YXRpb24gPSBkZWYubXV0YXRpb24udG9TdHJpbmcoKTtcbiAgfVxuXG4gIGlmIChkZWYuc3Vic2NyaXB0aW9uKSB7XG4gICAgc2NoZW1hUm9vdC5zdWJzY3JpcHRpb24gPSBkZWYuc3Vic2NyaXB0aW9uLnRvU3RyaW5nKCk7XG4gIH1cblxuICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyhzY2hlbWFSb290KVxuICAgIC5tYXAocm9vdFR5cGUgPT4gKHNjaGVtYVJvb3Rbcm9vdFR5cGVdID8gYCR7cm9vdFR5cGV9OiAke3NjaGVtYVJvb3Rbcm9vdFR5cGVdfWAgOiBudWxsKSlcbiAgICAuZmlsdGVyKGEgPT4gYSk7XG5cbiAgaWYgKGZpZWxkcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gYHNjaGVtYSB7ICR7ZmllbGRzLmpvaW4oJ1xcbicpfSB9YDtcbiAgfVxuXG4gIGlmIChjb25maWcgJiYgY29uZmlnLmZvcmNlKSB7XG4gICAgcmV0dXJuIGAgc2NoZW1hIHsgcXVlcnk6IFF1ZXJ5IH0gYDtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG4iXSwidmVyc2lvbiI6M30=