ffda99bcc34e169f328ab463b9d6e12b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fixSchemaAst = void 0;
const graphql_1 = require("graphql");
const print_schema_with_directives_1 = require("./print-schema-with-directives");
function buildFixedSchema(schema, options) {
    return graphql_1.buildSchema(print_schema_with_directives_1.printSchemaWithDirectives(schema), {
        noLocation: true,
        ...(options || {}),
    });
}
function fixSchemaAst(schema, options) {
    let schemaWithValidAst;
    if (!schema.astNode || !schema.extensionASTNodes) {
        schemaWithValidAst = buildFixedSchema(schema, options);
    }
    if (!schema.astNode) {
        schema.astNode = schemaWithValidAst.astNode;
    }
    if (!schema.extensionASTNodes) {
        schema.extensionASTNodes = schemaWithValidAst.extensionASTNodes;
    }
    return schema;
}
exports.fixSchemaAst = fixSchemaAst;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvYXJkYXRfMDAwL0d1aWxkL2dyYXBocWwtdG9vbHMvcGFja2FnZXMvdXRpbHMvc3JjL2ZpeC1zY2hlbWEtYXN0LnRzIiwibWFwcGluZ3MiOiI7OztBQUFBLHFDQUF5RTtBQUV6RSxpRkFBMkU7QUFFM0UsU0FBUyxnQkFBZ0IsQ0FBQyxNQUFxQixFQUFFLE9BQWdEO0lBQy9GLE9BQU8scUJBQVcsQ0FBQyx3REFBeUIsQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUNwRCxVQUFVLEVBQUUsSUFBSTtRQUNoQixHQUFHLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztLQUNuQixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLE1BQXFCLEVBQUUsT0FBZ0Q7SUFDbEcsSUFBSSxrQkFBaUMsQ0FBQztJQUN0QyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRTtRQUNoRCxrQkFBa0IsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDeEQ7SUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtRQUNuQixNQUFNLENBQUMsT0FBTyxHQUFHLGtCQUFrQixDQUFDLE9BQU8sQ0FBQztLQUM3QztJQUNELElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQUU7UUFDN0IsTUFBTSxDQUFDLGlCQUFpQixHQUFHLGtCQUFrQixDQUFDLGlCQUFpQixDQUFDO0tBQ2pFO0lBQ0QsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQWJELG9DQWFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL2FyZGF0XzAwMC9HdWlsZC9ncmFwaHFsLXRvb2xzL3BhY2thZ2VzL3V0aWxzL3NyYy9maXgtc2NoZW1hLWFzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHcmFwaFFMU2NoZW1hLCBCdWlsZFNjaGVtYU9wdGlvbnMsIGJ1aWxkU2NoZW1hIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBTY2hlbWFQcmludE9wdGlvbnMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IHByaW50U2NoZW1hV2l0aERpcmVjdGl2ZXMgfSBmcm9tICcuL3ByaW50LXNjaGVtYS13aXRoLWRpcmVjdGl2ZXMnO1xuXG5mdW5jdGlvbiBidWlsZEZpeGVkU2NoZW1hKHNjaGVtYTogR3JhcGhRTFNjaGVtYSwgb3B0aW9uczogQnVpbGRTY2hlbWFPcHRpb25zICYgU2NoZW1hUHJpbnRPcHRpb25zKSB7XG4gIHJldHVybiBidWlsZFNjaGVtYShwcmludFNjaGVtYVdpdGhEaXJlY3RpdmVzKHNjaGVtYSksIHtcbiAgICBub0xvY2F0aW9uOiB0cnVlLFxuICAgIC4uLihvcHRpb25zIHx8IHt9KSxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaXhTY2hlbWFBc3Qoc2NoZW1hOiBHcmFwaFFMU2NoZW1hLCBvcHRpb25zOiBCdWlsZFNjaGVtYU9wdGlvbnMgJiBTY2hlbWFQcmludE9wdGlvbnMpIHtcbiAgbGV0IHNjaGVtYVdpdGhWYWxpZEFzdDogR3JhcGhRTFNjaGVtYTtcbiAgaWYgKCFzY2hlbWEuYXN0Tm9kZSB8fCAhc2NoZW1hLmV4dGVuc2lvbkFTVE5vZGVzKSB7XG4gICAgc2NoZW1hV2l0aFZhbGlkQXN0ID0gYnVpbGRGaXhlZFNjaGVtYShzY2hlbWEsIG9wdGlvbnMpO1xuICB9XG5cbiAgaWYgKCFzY2hlbWEuYXN0Tm9kZSkge1xuICAgIHNjaGVtYS5hc3ROb2RlID0gc2NoZW1hV2l0aFZhbGlkQXN0LmFzdE5vZGU7XG4gIH1cbiAgaWYgKCFzY2hlbWEuZXh0ZW5zaW9uQVNUTm9kZXMpIHtcbiAgICBzY2hlbWEuZXh0ZW5zaW9uQVNUTm9kZXMgPSBzY2hlbWFXaXRoVmFsaWRBc3QuZXh0ZW5zaW9uQVNUTm9kZXM7XG4gIH1cbiAgcmV0dXJuIHNjaGVtYTtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==